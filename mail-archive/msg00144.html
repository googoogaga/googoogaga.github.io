<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: Two more bugs -->
<!--X-From-R13: Xnzrf Yavtug <wxavtugNshuz.arg> -->
<!--X-Date: Tue, 6 Aug 2002 21:18:20 &#45;0400 (EDT) -->
<!--X-Message-Id: 8880406D&#45;A9A3&#45;11D6&#45;8B79&#45;003065D63222@fuhm.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 15696.25870.580097.1972@h00045a4799d6.ne.client2.attbi.com -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Two more bugs</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00143.html">Date Prev</a>][<a href="msg00145.html">Date Next</a>][<a href="msg00143.html">Thread Prev</a>][<a href="msg00146.html">Thread Next</a>][<a href="index.html#00144">Date Index</a>][<a href="threads.html#00144">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Two more bugs</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Neel Krishnaswami &lt;<A HREF="mailto:neelk@DOMAIN.HIDDEN">neelk@xxxxxxxxxxxx</A>&gt;</li>
<li><em>Subject</em>: Re: Two more bugs</li>
<li><em>From</em>: James Knight &lt;<A HREF="mailto:jknight@DOMAIN.HIDDEN">jknight@xxxxxxxx</A>&gt;</li>
<li><em>Date</em>: Tue, 6 Aug 2002 21:18:08 -0400</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

On Tuesday, August 6, 2002, at 08:08  PM, Neel Krishnaswami wrote:

&gt;
&gt; Two more segfaults that probably shouldn't:
&gt;
&gt; #2:
&gt;   goo/user 0&lt;= (df foo (x|...) x)
&gt;   goo/user 0=&gt; #{Met foo ()}
&gt;   goo/user 0&lt;= (foo 1 2 3)

Known bug.
The optionals object created by &quot;...&quot; refers to the variables on the 
stack. Keeping a reference after your stack frame is gone will blow up. 
Why is this done? Performance, mainly.

Eventually, the compiler should get smart enough to analyze the code and 
transform the ... into a real object when necessary, but that isn't 
really a priority. Performance of this feature is important, as the 
dispatcher uses it. Copying the arguments around multiple times to do a 
dispatch causes a large slowdown.

Workaround: use (as &lt;tup&gt; x) if you need to store a copy after your 
function exits. You can see a few cases in the GOO code where this is 
necessary, e.g. curry.
James


</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00143" href="msg00143.html">Two more bugs</a></strong>
<ul><li><em>From:</em> Neel Krishnaswami</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00143.html">Two more bugs</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00145.html">Re: CVS update: goo/src/goo/cols</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00143.html">Two more bugs</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00146.html">Another bug</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="index.html#00144"><strong>Date</strong></a></li>
<li><a href="threads.html#00144"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
